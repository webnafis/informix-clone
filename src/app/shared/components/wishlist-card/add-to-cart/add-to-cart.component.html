@if (isVisible) {
  <div class="popup-overlay">
    <div class="modal-area">
      <div class="modal-area-main">
        <div class="product">
          <div class="product-img">
            <img [src]="image" (click)="onShowPop(indexNumber)" src="" alt="image" loading="lazy">
          </div>
          <div class="product-info">
            <h4>{{ product?.name }}</h4>

            @if (!product?.isVariation) {
              <h3>
                @if (product?.discountAmount > 0) {
                  <del>{{ product?.salePrice | currencyCtr}}</del>
                }

                {{ (product | price : "salePrice") | currencyCtr }}
              </h3>
            }


            @if (product?.isVariation && selectedVariationList) {
              <h3>
                <del>{{ (selectedVariationList?.salePrice) | currencyCtr }}</del>
                {{ (selectedVariationList | price : "salePrice") | currencyCtr }}
              </h3>
            } @else if(product?.isVariation && !selectedVariationList) {
              <h3>
                {{ (product | priceRange : "salePrice") | currencyCtr }}
              </h3>
            }
          </div>
        </div>

        @if(product?.variation){
          <div class="color-variant">
            <div class="color-variant-top">
              <span>{{ product?.variation }}</span>
              <!--        <a href="#">Size Guide</a>-->
            </div>
            <div class="color-variant-main">
              <ul>
                @for(data of product?.variationOptions; track $index){
                  <li>
                    <button (click)="onSelectVariation(data)" [class.active]="selectedVariation === data">
                      {{ data }}
                    </button>
                  </li>
                }
              </ul>
            </div>
          </div>
        }@else if(product?.variation2){
          <div class="size-variant" >
            <div class="size-variant-top">
              <span>{{ product?.variation2 }}</span>
            </div>
            <div class="size-variant-main">
              <ul>
                @for(data of product?.variation2Options; track $index){
                  <li>
                    <button (click)="onSelectVariation2(data)" [class.active]="selectedVariation2 === data">
                      {{ data }}
                      <span><i class="fa fa-check"></i></span>
                    </button>
                  </li>
                }
              </ul>
            </div>
          </div>
        }

        <div class="quantity">
          <div class="quantity-left">
            <span>Quantity</span>
          </div>
          <div class="quantity-right">
            <ul>
              <li>
                <button (click)="onDecrementQtySimple($event)">-</button>
              </li>
              <li><input type="text" [(ngModel)]="selectedQty" readonly></li>
              <li>
                <button (click)="onIncrementQtySimple($event)">+</button>
              </li>
            </ul>
          </div>
        </div>
      </div>

      <div class="buy-btn">
        <button
          [ngClass]="(product?.variation && product?.variation2 &&  selectedVariation && selectedVariation2) ? 'buy-btn1' : !(product?.variation && product?.variation2) && ((product?.variation || product?.variation2) && ( selectedVariation || selectedVariation2)) ? 'buy-btn1' : ((!product?.variation && !product?.variation2 && !selectedVariation && !selectedVariation2)) ? 'buy-btn1' : ''"
          (click)="onAddToCart($event)">Add to Cart
        </button>
      </div>

      <div class="modal-close">
        <span (click)="close()">X</span>
      </div>

    </div>
  </div>
}
