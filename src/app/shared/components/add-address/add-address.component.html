<div class="manage-main">
  <div class="get-address">
    <div class="manage-address-top">
      <h2>Add Delivery Address</h2>
      <a (click)="onClose()">
        <svg
          width="26"
          height="26"
          fill="currentColor"
          class="bi bi-x"
          viewBox="0 0 16 16"
        >
          <path
            d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"
          />
        </svg>
      </a>
    </div>

    <div class="address-select">
      <p>Address Type</p>

      <div class="address-bar">
        <button
          type="button"
          [class.active]="dataForm.get('addressType').value === 'home'"
          (click)="onAddressTypeChange('home')"
        >
          <svg
            class="MuiSvgIcon-root"
            focusable="false"
            viewBox="0 0 24 24"
            aria-hidden="true"
          >
            <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"></path>
          </svg>
          <span> Home</span>
        </button>
        <button
          type="button"
          [class.active]="dataForm.get('addressType').value === 'office'"
          (click)="onAddressTypeChange('office')"
        >
          <svg
            class="MuiSvgIcon-root"
            focusable="false"
            viewBox="0 0 24 24"
            aria-hidden="true"
          >
            <path
              d="M10 16v-1H3.01L3 19c0 1.11.89 2 2 2h14c1.11 0 2-.89 2-2v-4h-7v1h-4zm10-9h-4.01V5l-2-2h-4l-2 2v2H4c-1.1 0-2 .9-2 2v3c0 1.11.89 2 2 2h6v-2h4v2h6c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2zm-6 0h-4V5h4v2z"
            ></path>
          </svg>
          <span>Office</span>
        </button>
        <button
          type="button"
          [class.active]="dataForm.get('addressType').value === 'home town'"
          (click)="onAddressTypeChange('home town')"
        >
          <svg
            class="MuiSvgIcon-root"
            focusable="false"
            viewBox="0 0 24 24"
            aria-hidden="true"
          >
            <path d="M8.17 5.7L1 10.48V21h5v-8h4v8h5V10.25z"></path>
            <path
              d="M10 3v1.51l2 1.33L13.73 7H15v.85l2 1.34V11h2v2h-2v2h2v2h-2v4h6V3H10zm9 6h-2V7h2v2z"
            ></path>
          </svg>
          <span>Home Town</span>
        </button>
      </div>
    </div>

    <form (ngSubmit)="onSubmit()" [formGroup]="dataForm">
      <div class="form-all-input">
        <div class="name-phone">
          <div class="form-input-select w-50 w-100">
            <mat-form-field class="mat-input-field" appearance="outline">
              <mat-label>Full Name</mat-label>
              <input
                matInput
                formControlName="name"
                placeholder="Enter your name"
              />
              <mat-error>This field is required</mat-error>
            </mat-form-field>
          </div>
          <div class="form-input-select w-50 w-100">
            <mat-form-field class="mat-input-field" appearance="outline">
              <mat-label class="mat-label-field">Mobile Number</mat-label>
              <div class="number">

            <span class="flag">
              <svg width="25px" height="25px" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg"
                   aria-hidden="true" role="img"
                   class="iconify iconify--twemoji" preserveAspectRatio="xMidYMid meet" fill="#000000"><g
                id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round"
                                                               stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path
                fill="#006A4D" d="M36 27a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V9a4 4 0 0 1 4-4h28a4 4 0 0 1 4 4v18z"></path><circle
                fill="#F42A41" cx="16" cy="17.5" r="7"></circle></g></svg>
            </span>
                <span class="country-code">{{ user?.countryCode ?? "+88" }}</span>

              </div>

              <input
                matInput
                numberOnly
                [appOnlyNumber]="true"
                [maxDigits]="11"
                type="tel"
                formControlName="phoneNo"
                placeholder="Enter mobile number"
              />
              <mat-error>This field is required</mat-error>
            </mat-form-field>
          </div>
        </div>

        <div class="division-area-zone">
          <div class="form-input-select w-33 w-100">
            <mat-form-field class="mat-select-form" appearance="outline">
              <mat-label>Select Division</mat-label>
              <mat-select
                formControlName="division"
                (selectionChange)="onChangeDivision($event)">
                @for (item of divisions; track item._id; ) {
                  <mat-option [value]="item.name">
                    {{ item.name }}
                  </mat-option>
                }
              </mat-select>
              <mat-error>This field is required</mat-error>
            </mat-form-field>
          </div>
          <div class="form-input-select w-33 w-100">
            <mat-form-field class="mat-select-form" appearance="outline">
              <mat-label>Select Area</mat-label>
              <mat-select
                formControlName="area"
                (selectionChange)="onChangeArea($event)">
                @for (item of area; track item._id; ) {
                  <mat-option [value]="item.name">
                    {{ item.name }}
                  </mat-option>
                }
              </mat-select>
              <mat-error>This field is required</mat-error>
            </mat-form-field>
          </div>
          <div class="form-input-select w-33 w-100">
            <mat-form-field class="mat-select-form" appearance="outline">
              <mat-label>Select Zone</mat-label>
              <mat-select formControlName="zone">
                @for (item of zone; track item._id; ) {
                  <mat-option [value]="item.name">
                    {{ item.name }}
                  </mat-option>
                }
              </mat-select>
              <mat-error>This field is required</mat-error>
            </mat-form-field>
          </div>
        </div>

        <div class="form-input-select full-address">
          <mat-form-field class="mat-input-field" appearance="outline">
            <mat-label>Full Address</mat-label>
            <input
              matInput
              formControlName="shippingAddress"
              placeholder="Enter your full address"
            />
            <mat-error>This field is required</mat-error>
          </mat-form-field>
        </div>

      </div>

      <div class="submit-and-slider">
        @if (dialogData) {
          @if(!isLoading){
            <button class="submit-btn" type="submit">
              <svg width="14px" height="14px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M4 12.6111L8.92308 17.5L20 6.5" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>
              Update Address
            </button>
          }
          @if(isLoading){
            <button class="submit-btn" type="submit">
              <div><span class="loader btn-loader"></span></div>
              <div>Please Wait...</div>
            </button>
          }
        } @else {
          <div>
            @if(!isLoading){
              <button class="submit-btn" type="submit">
                <svg width="14px" height="14px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M4 12.6111L8.92308 17.5L20 6.5" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>
                Save Address
              </button>
            }
            @if(isLoading){
              <button class="submit-btn" type="submit">
                <div><span class="loader btn-loader"></span></div>
                <div>Please Wait...</div>
              </button>
            }
          </div>
        }
      </div>
    </form>
  </div>
</div>
