<form [formGroup]="dataForm" (ngSubmit)="onSubmit()" autocomplete="off">
  <label for="username">
    @if (isSvg) {
      Email or Phone No *
    } @else if (isEmail) {
      Email *
    } @else {
      Phone No *
    }
  </label>
  <div class="input-area" [ngClass]="{'is-invalid': isFieldInvalid('username')}">

    @if (isEmail){
      @if (!isSvg) {
        <span class="flag">
      <!-- Email SVG -->
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512.038 384.251">
        <g id="email" transform="translate(0 448.101)">
          <path id="Path_1796" data-name="Path 1796"
                d="M36.6-446.4c-25.5,6.2-41.5,32.2-35.1,56.9A44.82,44.82,0,0,0,12.2-370c4.5,4.6,217.5,147.1,225.3,150.6a45.925,45.925,0,0,0,38.2-.5c9.5-4.5,218.2-144.2,223.5-149.6,24.9-25.4,11.3-68.6-24.3-77C465.5-448.7,45.8-448.6,36.6-446.4Z"></path>
          <path id="Path_1797" data-name="Path 1797"
                d="M0-223.6c0,81,.3,118.1,1.1,121.8,3.7,17.6,17.9,32,36,36.3,9.4,2.2,426.7,2.2,437.2,0,18.2-3.8,32.9-18.4,36.6-36.3,1.3-6.1,1.6-238.6.3-238-.4.1-48.7,32.3-107.4,71.5s-109.9,72.9-113.9,74.8c-11,5.6-20.4,7.7-33.9,7.7s-22.9-2.1-33.9-7.7c-4-1.9-55.2-35.6-113.9-74.8S1.2-339.7.8-339.8C.3-340,0-287.7,0-223.6Z"></path>
        </g>
      </svg>
    </span>
      }
    } @else {
      @if (!isSvg) {
        <span class="flag">
      <!-- Phone Flag SVG -->
      <svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 24 24" width="512"
           height="512">
        <path
          d="M23,11a1,1,0,0,1-1-1,8.008,8.008,0,0,0-8-8,1,1,0,0,1,0-2A10.011,10.011,0,0,1,24,10,1,1,0,0,1,23,11Zm-3-1a6,6,0,0,0-6-6,1,1,0,1,0,0,2,4,4,0,0,1,4,4,1,1,0,0,0,2,0Zm2.183,12.164.91-1.049a3.1,3.1,0,0,0,0-4.377c-.031-.031-2.437-1.882-2.437-1.882a3.1,3.1,0,0,0-4.281.006l-1.906,1.606A12.784,12.784,0,0,1,7.537,9.524l1.6-1.9a3.1,3.1,0,0,0,.007-4.282S7.291.939,7.26.908A3.082,3.082,0,0,0,2.934.862l-1.15,1C-5.01,9.744,9.62,24.261,17.762,24A6.155,6.155,0,0,0,22.183,22.164Z"/>
      </svg>
    </span>
      }
    }

    <input id="username"
           [type]="'text'"
           formControlName="username"
           [readonly]="type === 'password-reset'"
           [placeholder]="'Enter your phone number or email'"
           (input)="onInputChange($event?.target?.value)"
    >

    @if (type === 'password-reset' && !this.isOtpValid) {
      <span class="edit" (click)="onEditPhoneNo()">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#5f6368"><path d="M0 0h24v24H0z" fill="none"/><path
          d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/></svg>
      </span> <!-- Edit Icon -->
    }
  </div>

  @if(type === 'password-reset' && this.isOtpValid) {
  <div class="form-group">
    <label for="password">New Password *</label>
    <div class="input-wrapper">
      <input [type]="!passwordVisibility ? 'password' : 'text'" id="password" formControlName="password"
             (input)="checkPasswordStrength()"
             [required]="true"
             [minlength]="6"
             placeholder="Enter your new password"
             [ngClass]="{'is-invalid': isFieldInvalid('password')}">
      <span [class.visible]="!passwordVisibility" class="input-icon password-eye" (click)="togglePasswordVisibility()">
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#3e3e3e"><path
            d="M0 0h24v24H0z" fill="none"/><path
            d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
      </span>

      <span [class.visible]="passwordVisibility" class="input-icon password-eye" (click)="togglePasswordVisibility()">
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#3e3e3e"><path
            d="M0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0z" fill="none"/><path
            d="M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"/></svg>
      </span>
    </div>


    <div class="input-hint" [ngClass]="passwordStrength">
      <p><span class="hint-icon">&#x2022;</span> Password must have 6 characters</p>
      <a href="/login">Back to Login?</a>
    </div>
  </div>
  }

  @if (type === 'password-reset' && !this.isOtpValid) {
    <div class="input-otp">
      <app-otp-input (onFinalInput)="onOtpEnter($event)" [isInvalid]="isInvalidOtp"></app-otp-input>
    </div>
  }

  <div class="action">
    @if (!isLoading) {
      <button type="submit" class="btn-primary">{{ btnName }}</button>
    }

    @if (isLoading) {
      <button type="button" class="btn-primary btn-loading">
        <div><span class="loader btn-loader"></span></div>
        <div>Please Wait</div>
      </button>
    }
  </div>
</form>
