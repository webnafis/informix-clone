<div class="payment-area">
  <app-title [title]="'selectPayment' | translate"></app-title>
  @defer (when !isLoading) {
    <div class="online-payment">
      @for (item of filterPaymentMethods; track item; let i = $index) {
        <div class="method-info active"
             [class.active]="item.providerName === selectedPaymentProvider" (click)="onSelectPaymentMethod(item)">
          <img [src]="item?.image ?? 'https://cdn.saleecom.com/upload/images/placeholder.png' " alt="image"
               loading="lazy" draggable="false">
          <div class="checked-icon" [class.visible]="item.providerName === selectedPaymentProvider">
              <svg xmlns="http://www.w3.org/2000/svg" width="49.305" height="49.305" viewBox="0 0 49.305 49.305">
                <path id="checked-icon"
                      d="M28.028,3.375A24.653,24.653,0,1,0,52.68,28.028,24.649,24.649,0,0,0,28.028,3.375ZM40.65,21.213,24.8,37.13h-.012a2.14,2.14,0,0,1-1.375.652,2.075,2.075,0,0,1-1.387-.676l-6.637-6.637a.472.472,0,0,1,0-.676l2.11-2.11a.458.458,0,0,1,.664,0l5.262,5.262L37.889,18.38a.468.468,0,0,1,.332-.142h0a.43.43,0,0,1,.332.142l2.074,2.145A.467.467,0,0,1,40.65,21.213Z"
                      transform="translate(-3.375 -3.375)"/>
              </svg>
          </div>
          <span>{{ item?.name }}</span>

<!--          @if ( && selectedPaymentProvider != "Cash on Delivery" && selectedPaymentProvider == item?.name) {-->
<!--            <div class="active-icon">-->
<!--              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">-->
<!--                <path d="m80-160 400-640 400 640H80Z"/>-->
<!--              </svg>-->
<!--            </div>-->
<!--          }-->
        </div>
      }
    </div>
  } @placeholder (minimum 50ms) {
    <app-payment-card-loader/>
  }

  <div class="manual-payment-form"
       [style.display]="(selectedPaymentProviderType === 'sent-money' || selectedPaymentProviderType === 'payment') ? 'block' : 'none'">
    <div class="payment-head">
      <img [src]="selectedPaymentMethodLogo ?? 'https://cdn.saleecom.com/upload/images/placeholder.png' " alt="image"
           loading="lazy" draggable="false">
      <h4>{{ selectedPayment?.accountNumber }}</h4>
      <div class="clipboard" (click)="copyCouponCodes(selectedPayment?.accountNumber)">
        @if(!isCopied){
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" ><g id="_01_align_center" data-name="01 align center"><path d="M22,4.145,17.986,0H10A3,3,0,0,0,7,3V4H5A3,3,0,0,0,2,7V24H18V19h4ZM16,22H4V7A1,1,0,0,1,5,6H7V19h9ZM9,17V3a1,1,0,0,1,1-1h6V6h4V17Z"/></g></svg>
        }@else{
          <svg class="copied" xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 24 24">
            <path d="m15.829,2c-.413-1.164-1.525-2-2.829-2h-2c-1.304,0-2.416.836-2.829,2H3v19c0,1.654,1.346,3,3,3h12c1.654,0,3-1.346,3-3V2h-5.171Zm3.171,19c0,.551-.448,1-1,1H6c-.551,0-1-.449-1-1V4h5v-1c0-.551.449-1,1-1h2c.552,0,1,.449,1,1v1h5v17Zm-8.514-7.014l4.813-4.7,1.4,1.427-4.792,4.707c-.386.386-.895.58-1.405.58s-1.026-.195-1.417-.586l-2.279-2.193,1.387-1.441,2.293,2.207Z"/>
          </svg>
        }
<!--        <svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 24 24" ><path d="m23.707,8.544l-13.577,13.577c-.567.567-1.32.879-2.122.879h-.006c-.803-.002-1.557-.316-2.123-.887L.311,16.502l1.42-1.408,5.569,5.611c.188.189.439.295.707.295h.002c.267,0,.519-.104.708-.293l13.577-13.577,1.414,1.414Zm-15.696,3.437h.017c.801,0,1.554-.312,2.121-.879L18.349,2.902l-1.414-1.414-8.2,8.2c-.19.191-.404.307-.713.293-.269-.001-.521-.108-.709-.301L3.235,5.516l-1.429,1.399,4.077,4.165c.565.577,1.32.897,2.127.902Z"/></svg>-->
      </div>
    </div>
    <div class="payment-instructions" [innerHTML]="selectedPayment?.paymentInstruction | safeHtmlCustom"></div>

    <form [formGroup]="dataForm">
      <div class="form-group">
        <div class="form-input-select w-50 w-100">
          <p>{{ selectedPaymentProvider }} Number: </p>
          <mat-form-field class="mat-input-field" appearance="outline">
            <mat-label>017XXXXXXXX</mat-label>
            <input [required]="selectedPaymentProviderType === 'sent-money' || selectedPaymentProviderType === 'payment'" matInput formControlName="customerPaymentNo"
                   placeholder="017XXXXXXXX"/>
            <mat-error>{{ 'Number Required' }}</mat-error>
          </mat-form-field>

        </div>

        <div class="form-input-select w-50 w-100">
          <p>Transaction ID: </p>
          <mat-form-field class="mat-input-field" appearance="outline">
            <mat-label>{{ 'Transaction Id' }}</mat-label>
            <input [required]="selectedPaymentProviderType === 'sent-money' || selectedPaymentProviderType === 'payment'" matInput formControlName="paymentTransactionId"
                   placeholder="Enter Transaction ID"/>
            <mat-error>{{ 'Transaction ID Required' }}</mat-error>
          </mat-form-field>
        </div>

      </div>
    </form>
  </div>


</div>
