<div class="main-area">
  <div class="container">
    <div class="checkout-area">
      <div>
        <app-address-area-1 (onChangeAddress)="onChangeAddress($event)"></app-address-area-1>
       <div class="payment-area">
         <app-delivery-charge (onChangeDeliveryCharge)="onChangeDeliveryCharge($event)"></app-delivery-charge>
         <app-payment-method (onChangePaymentMethod)="onChangePaymentMethod($event)"></app-payment-method>
       </div>
      </div>
      <div>
        <div class="order-area">
          <app-title [title]="'Order Items' + ' (' + carts.length + ' Items)'"></app-title>
          <div class="order-items pc-card">
            @for (item of carts; track item; let i = $index) {
              <app-order-item-card
                [data]="item"
                (onIncrementCartQty)="onIncrementQty($event)"
                (onDecrementCartQty)="onDecrementQty($event)">
              </app-order-item-card>
            }
          </div>

          <div class="order-items mobile-card">
            @for (item of carts; track item; let i = $index) {
              <app-order-item-card-mobile
                [data]="item"
                (onIncrementCartQty)="onIncrementQty($event)"
                (onDecrementCartQty)="onDecrementQty($event)">
              </app-order-item-card-mobile>
            }
          </div>

          <div class="summary">
            <div class="summary-item">
              <div class="label">Subtotal:</div>
              <div class="value">{{ cartRegularSubTotal | currencyCtr}}</div>
            </div>
            <div class="summary-item">
              <div class="label">Discount:</div>
              <div class="value">-{{ cartDiscountAmount | currencyCtr }}</div>
            </div>
            <div class="summary-item border-bottom">
              <div class="label">Delivery Charge:</div>
              <div class="value">{{ (deliveryChargeAmount ?? 0) | currencyCtr }}</div>
            </div>
            <div class="summary-item grand-total">
              <div class="label grand-total">Grand Total:</div>
              <div class="value">{{ grandTotal | currencyCtr }}</div>
            </div>
          </div>
        </div> <!-- END! Cart Item and Calculation Area -->

        <app-coupons></app-coupons>
        <div class="button-area">
          <button class="back-button" routerLink="/cart">
            <svg height="30" viewBox="0 0 48 48" width="30" xmlns="http://www.w3.org/2000/svg">
              <path d="M0 0h48v48h-48z" fill="none"/>
              <path d="M40 22h-24.34l11.17-11.17-2.83-2.83-16 16 16 16 2.83-2.83-11.17-11.17h24.34v-4z"/>
            </svg>
            <span> Back to Cart</span>
          </button>
          @if (!isLoading) {
            <button class="order-button" (click)="onConfirmOrder()">
              <svg height="30px" id="Layer_1" style="enable-background:new 0 0 512 512;" version="1.1"
                   viewBox="0 0 512 512" width="30px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"
              ><g><path d="M223.9,329.7c-2.4,2.4-5.8,4.4-8.8,4.4s-6.4-2.1-8.9-4.5l-56-56l17.8-17.8l47.2,47.2l124.8-125.7l17.5,18.1L223.9,329.7z"/></g></svg>
              <span> Confirm Order</span>
            </button>
          }
          @if (isLoading) {
            <button type="button" class="order-button wait-btn">
              <div><span class="loader btn-loader"></span></div>
              <div>Please Wait...</div>
            </button>
          }
        </div>
      </div>
    </div>
  </div>
</div>

<div class="bottom-nav">
  <div class="mobile-checkout">
    <div class="total-area">
      <p class="total">Total: <span>{{ grandTotal }}</span></p>
      <p class="button-text">Vat included, where applicable</p>
    </div>
    @if (!isLoading) {
    <button class="place-order" (click)="onConfirmOrder()">Place Order</button>
    }
    @if (isLoading) {
      <button type="button" class="order-button wait-btn">
        <div><span class="loader btn-loader"></span></div>
        <div>Please Wait...</div>
      </button>
    }
  </div>
</div>
